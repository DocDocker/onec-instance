# Сервер 1С:Предприятия

Данный комплект предназначен для быстрого развертывания серевера 1СЖПредприятия на хосте для целей тестирования. Не предназначен для работы на продуктивном сервере!

Разрабатывалось и тестировалось на операционной системе Linux, но должен работать и на WIndows 10, но потребуются выполнить часть действий в ручную.

# Запуск на Linux

1. Необходимо установить свежую версию Docker и Docker-compose c официального сайта
2. Создать файл `.env` в корне проекта. В качестве примера использовать `.env.example`. В файле должны быть определены переменные:
```
    ONEC_USERNAME=<ПОЛЬЗОВАТЕЛЬ_USERS.1C.V8.RU>
    ONEC_PASSWORD=<ПАРОЛЬ_ОТ_USERS.1C.V8.RU>
    ONEC_VERSION=8.3.14.1993
    ONEC_PG_VERSION=9.6-2-1C
    PG_PORT=5432
    CRS_PORT=1542
    RAS_PORT=1545
    HOSTNAME=onec_server
```

Используемая учетная запись должна иметь доступ к скачиванию платформы 1С:Предприятие

3. Запустить скрипт развертывания инстанса:

```
    ./onec_instance.sh start
```
Во время установки потребуется ввести пароль суперпользователя. Он используется для доступа к файлу `/etc/hosts`. В него будет прописан IP адрес сервера 1С:Предприятие

Скрипт поддерживает несколько команд:
```
 - start - Запускает сервер
 - stop - останавливает сервер
 - restart - перезапускает сервер
 - status - проверятет , что контейнер с сервером запущен в текущий момент
```

4. Создать новую серверную ИБ с такими параметрами подключения:

    - **Кластер серверов 1С:Предприятие** - ***onec_server***
    - **Тип СУБД** - PostgreSQL
    - **Сервер баз данных** - db
    - **Пользователь баз данных** - postgres
    - **Пароль пользователя баз данных оставляем пустым**


# Запуск на Winsows

**TODO**


# Благодарности

 - ПОлезные идеи по созданию образов брались из [этого](https://github.com/firstBitSemenovskaya/onec-docker) репозитария 